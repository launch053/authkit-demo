import{r as t,c as V,j as e,T as v,F as _,h as M,k as W,l as b}from"./react-vendor-AsFLCtLt.js";import{e as y,f as k,p as h,q as I,b as g,i as E,k as q,j as F,$ as O,r as U}from"./ui-vendor-vFVSZp0F.js";import{u as z,g as J,F as P,A as X}from"./date-Y45boDzb.js";import{b as Y,a as Z,n as G,c as H}from"./validation-C3ihj2kc.js";import"./i18n-vendor-Bu7WbbtU.js";function K({title:a,titleId:r,...i},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),a?t.createElement("title",{id:r},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Q=t.forwardRef(K);function ee({title:a,titleId:r,...i},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),a?t.createElement("title",{id:r},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const ae=t.forwardRef(ee);function te({title:a,titleId:r,...i},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),a?t.createElement("title",{id:r},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const re=t.forwardRef(te);function se({title:a,titleId:r,...i},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),a?t.createElement("title",{id:r},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const le=t.forwardRef(se);function ne(a){const[r,i]=t.useState(null),[s,x]=t.useState(null),[p,m]=t.useState(!1),[f,j]=t.useState(0),l=t.useCallback(()=>j(d=>d+1),[]);return t.useEffect(()=>{m(!0),a().then(d=>i(d)).catch(d=>x(d)).finally(()=>m(!1))},[f]),{data:r,error:s,loading:p,refetch:l}}function he(){const{t:a,i18n:r}=V(),[i,s]=t.useState(!1),{avatarPreview:x,fileInputRef:p,handleAvatarChange:m,resetAvatarPreview:f}=z(),j=async()=>(await new Promise(c=>setTimeout(c,1500)),{id:"1",name:"John Doe",email:"john.doe@example.com",phone:"+1 (555) 123-4567",avatar:"https://i.pravatar.cc/300?img=12",birthdate:new U(1990,5,15),gender:"male"}),{data:l,loading:d,error:w,refetch:C}=ne(()=>j()),{minDate:L,maxDate:S}=J(),A=async c=>{try{await new Promise(u=>setTimeout(u,1e3)),F({title:a("Success"),color:"success",description:a("Profile updated successfully"),timeout:3e3,shouldShowTimeoutProgress:!0}),s(!1),f(),C()}catch{F({title:a("Error"),color:"danger",description:a("Failed to update profile"),timeout:3e3,shouldShowTimeoutProgress:!0})}},R=()=>M().shape({avatar:H(a),name:G(a),phone:Z(a),birthdate:Y(a)}),$=c=>{if(!c)return a("Not provided");const u=c.toDate(O());return new Intl.DateTimeFormat(r.language,{year:"numeric",month:"long",day:"numeric"}).format(u)};return w?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4",children:[e.jsx("p",{className:"text-danger text-lg font-medium",children:a("Error loading profile")}),e.jsx("p",{className:"text-default-500 text-sm",children:w.message})]}):e.jsx("div",{className:"w-full",children:d?e.jsx(y,{className:"w-full",children:e.jsxs(k,{className:"pt-20 pb-8 px-6",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx(h,{className:"w-32 h-32 rounded-full"})}),e.jsxs("div",{className:"text-center space-y-2 mb-8",children:[e.jsx(h,{className:"h-7 w-40 rounded-lg mx-auto"}),e.jsx(h,{className:"h-4 w-56 rounded-lg mx-auto"})]}),e.jsxs("div",{className:"flex justify-center gap-6 pt-6 border-t border-divider",children:[e.jsx(h,{className:"h-4 w-20 rounded-lg"}),e.jsx(h,{className:"h-4 w-24 rounded-lg"})]})]})}):l?e.jsx(y,{className:"w-full",children:e.jsx(k,{className:"pt-20 pb-8 px-6",children:i?e.jsx(_,{initialValues:{avatar:null,name:l.name,phone:l.phone,birthdate:l.birthdate},validationSchema:R(),onSubmit:A,children:({isSubmitting:c,values:u,setFieldValue:N,setFieldTouched:B,errors:D,touched:T})=>e.jsxs(W,{className:"space-y-4",children:[e.jsx(X,{avatarPreview:x,existingAvatar:l.avatar,fileInputRef:p,handleAvatarChange:m,errors:D,touched:T,size:128,showUploadButton:!1}),e.jsx("div",{className:"text-center mb-6",children:e.jsx("p",{className:"text-default-500 text-sm",children:l.email})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{name:"name",children:({field:o,meta:n})=>e.jsx(E,{...o,label:n.touched&&n.error?a(n.error):a("Full Name"),placeholder:a("Enter your full name"),isInvalid:n.touched&&!!n.error,variant:"bordered","aria-label":a("Full name"),"aria-required":"true"})}),e.jsx(b,{name:"phone",children:({field:o,meta:n})=>e.jsx(E,{...o,label:n.touched&&n.error?a(n.error):a("Phone Number"),type:"tel",placeholder:a("Enter your phone number"),startContent:e.jsx(P,{className:"w-5 h-5 text-default-400"}),isInvalid:n.touched&&!!n.error,variant:"bordered","aria-label":a("Phone number"),"aria-required":"true"})}),e.jsx(b,{name:"birthdate",children:({meta:o})=>e.jsx(q,{label:o.touched&&o.error?a(o.error):a("Date of Birth"),value:u.birthdate||null,onChange:n=>{N("birthdate",n,!0),B("birthdate",!0,!1)},minValue:L,maxValue:S,showMonthAndYearPickers:!0,isInvalid:o.touched&&!!o.error,variant:"bordered","aria-label":a("Date of Birth"),"aria-required":"true"})})]}),e.jsxs("div",{className:"flex flex-col gap-2 pt-4",children:[e.jsx(g,{type:"submit",color:"primary",variant:"shadow",radius:"full",fullWidth:!0,isLoading:c,startContent:e.jsx(ae,{className:"w-4 h-4"}),"aria-label":a("Save profile"),children:e.jsx(v,{children:"Save"})}),e.jsx(g,{type:"button",variant:"light",radius:"full",fullWidth:!0,onPress:()=>{s(!1),f()},startContent:e.jsx(le,{className:"w-4 h-4"}),"aria-label":a("Cancel editing"),children:e.jsx(v,{children:"Cancel"})})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:"relative",children:e.jsx(I,{isBlurred:!0,alt:a("Profile picture"),src:l.avatar||"https://i.pravatar.cc/300?img=12",width:128,height:128,className:"object-cover shadow-lg",radius:"full"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:l.name}),e.jsx("p",{className:"text-default-500 text-base",children:l.email})]}),e.jsxs("div",{className:"flex flex-col items-center gap-4 pt-6 border-t border-divider",children:[e.jsxs("div",{className:"flex justify-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-default-500",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:l.phone})]}),e.jsxs("div",{className:"flex items-center gap-2 text-default-500",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:$(l.birthdate)})]})]}),e.jsx(g,{size:"md",variant:"light",radius:"full",startContent:e.jsx(re,{className:"w-4 h-4"}),onPress:()=>s(!0),className:"mt-2",fullWidth:!0,"aria-label":a("Edit profile"),children:e.jsx(v,{children:"Edit"})})]})]})})}):null})}export{he as default};
