import{c as f,u as x,o as g,r as c,j as e,T as t,F as j,h as y,k as b,l as d,L as v,m as P,n as N}from"./react-vendor-AsFLCtLt.js";import{i as u,b as R,j as m}from"./ui-vendor-vFVSZp0F.js";import{A as E,g as S}from"./errors-Ca1wdunW.js";import{p as T}from"./validation-C3ihj2kc.js";import{R as p}from"./constants-3f2xZCRM.js";import"./i18n-vendor-Bu7WbbtU.js";function M(){const{t:r}=f(),i=x(),[w]=g(),n=w.get("token"),l=c.useRef(null);c.useEffect(()=>{var a;(a=l.current)==null||a.focus()},[n,i,r]);const h=async a=>{try{if(!n)throw new E(r("Invalid or missing reset token"));await new Promise(o=>setTimeout(o,1500)),m({title:r("Success"),color:"success",description:r("Your password has been reset successfully"),timeout:2e3,shouldShowTimeoutProgress:!0}),i(p.LOGIN)}catch(o){const s=S(o,r("An error occurred while resetting your password"));I(r,s)}};return e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold leading-tight tracking-tight text-center",children:e.jsx(t,{children:"Reset your password"})}),e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-8 text-center",children:e.jsx(t,{children:"Enter your new password below to complete the reset process"})})]}),e.jsx(j,{initialValues:{password:"",confirmPassword:""},validationSchema:k(r),onSubmit:h,children:({isSubmitting:a})=>e.jsxs(b,{className:"flex flex-col gap-2",children:[e.jsx(d,{name:"password",children:({field:o,meta:s})=>e.jsx(u,{...o,ref:l,type:"password",label:s.touched&&s.error?r(s.error):r("New Password"),autoComplete:"new-password",placeholder:r("Enter your new password"),isInvalid:s.touched&&!!s.error,description:r("Must be at least 8 characters with uppercase, lowercase, and number"),"aria-label":r("New password"),"aria-required":"true","aria-invalid":s.touched&&!!s.error})}),e.jsx(d,{name:"confirmPassword",children:({field:o,meta:s})=>e.jsx(u,{...o,type:"password",label:s.touched&&s.error?r(s.error):r("Confirm Password"),autoComplete:"new-password",placeholder:r("Confirm your new password"),isInvalid:s.touched&&!!s.error,"aria-label":r("Confirm password"),"aria-required":"true","aria-invalid":s.touched&&!!s.error})}),e.jsx(R,{className:"mt-4",type:"submit",isLoading:a,color:"primary",variant:"shadow",radius:"full",fullWidth:!0,"aria-label":r("Reset password button"),children:e.jsx(t,{children:"Reset password"})})]})}),e.jsxs("p",{className:"text-center text-sm text-gray-500 font-medium my-4",children:[e.jsx(t,{children:"Remember your password?"})," ",e.jsx(v,{to:p.LOGIN,className:"text-primary font-medium hover:underline transition-colors","aria-label":r("Navigate to login page"),children:e.jsx(t,{children:"Sign in"})})]})]})}const k=r=>y().shape({password:T(r),confirmPassword:P().oneOf([N("password")],r("Passwords must match")).required(r("Please confirm your password"))}),I=(r,i)=>m({title:r("Error"),color:"danger",description:i||r("An error occurred while resetting your password"),timeout:4e3,shouldShowTimeoutProgress:!0});export{M as default};
